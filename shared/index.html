<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name='viewport' content='width=device-width, initial-scale=1.0' />
  <script src="scripts/jquery-1.6.4.min.js" type="text/javascript"></script>
  <script src="scripts/jquery.signalR-2.0.3.min.js" type="text/javascript"></script>
  <title>QR Check-In Lib</title>
</head>

<body>
  <div id='app'><!--outlet--></div>
  <script type='module' src='/src/entry-client.jsx'></script>
  <script>
    var devMgrConnStr = "http://localhost:60559/signalr";
    var scannerIdx = 0;

    var conn = $.hubConnection(devMgrConnStr);

    conn.reconnecting(function () {
      console.log("Attempting to reconnect to signalR");
    })

    conn.reconnected(function () {
      console.log("signalR reconnected");
    })

    conn.disconnected(function () {
      console.error("signalR disconnected");

      setTimeout(function () {
        conn.start().done(function () {
          console.log("signalR connected");
        }).fail(function (err) {
          console.error(JSON.stringify(err));
        });
      }, 5000)
    });

    var proxy = conn.createHubProxy("deviceManagerHub");

    conn.start().done(function () {
      console.log("signalR is connected");
    }).fail(function (err) {
      console.error(JSON.stringify(err));
    });
  </script>
</body>

</html>